{% extends 'base/base.html' %}

{% load static %}

{% block extrastyle %}
<link rel="stylesheet" href="{% static 'polls/parts.css' %}">
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="offset-sm-2 col-sm-8 update-container">
            <h2>Availale vehicles:</h2>
            <div class="row">
                <div class="col-sm-4">
                    <form method="get">
                        {% csrf_token %}
                        <div class="form-group mt-3">
                            {{ search_form.search }}
                            <button type="submit">Search</button><br>
                            {% if search_form.search.errors %}
                            <small class="form-text text-danger">{{ search_form.search.errors }}</small>
                            {% endif %}
                        </div>
                    </form>
                </div>
                <div class="col-sm-4">
                    <form method="get">
                        {% csrf_token %}
                        <div class="form-group mt-3">
                            {{ order_form.order }}
                            <button type="submit">Order</button><br>
                            {% if order_form.order.errors %}
                            <small class="form-text text-danger">{{ order_form.order.errors }}</small>
                            {% endif %}
                        </div>
                    </form>
                </div>
            </div>
            {% for vehicle in vehicles %}
            <hr>
            <div class="row">
                <div class="col-sm-5">
                    <strong>Mark:</strong> {{ vehicle.name }}</a><br>
                    <strong>Model:</strong> {{ vehicle.model }}<br>
                    <strong>Price:</strong> {{ vehicle.price }} BYN<br>
                    <strong>Adress:</strong> {{ vehicle.address }}<br>
                    <strong>Type:</strong> {{ vehicle.type }}<br>
                    <form action={% url "polls:rent" vehicle.id %}>
                        {% csrf_token %}
                        <input type="submit" class="mt-5" value="Rent" />
                    </form>                
                </div>
            </div>
            {% empty %}
                <p>There are no available vehicles</p>
                <br>
            {% endfor %}
            <hr>
            <hr style="height: 5px; background: black; width: 80%; margin: 20px auto;">
            <p style="text-align: center;">{{ quote }}</p>
        </div>
        <div class="col-sm-2">
            <div class="filter-container">
                <form method="get">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-sm-5">
                            <label class="row" style="text-align: center;" for="{{ filter_form.mark.id_for_label }}">{{ filter_form.mark.label_tag }}</label>
                            <div class="row">
                                {{ filter_form.mark }}                            
                            </div>
                            {% if filter_form.mark.errors %}
                            <small class="row form-text text-danger">{{ filter_form.mark.errors }}</small>
                            {% endif %}
                        </div>
                        <div class="offset-sm-2 col-sm-5">
                            <label class="row" style="text-align: center;" for="{{ filter_form.branch.id_for_label }}">{{ filter_form.branch.label_tag }}</label>
                            <div class="row">
                                {{ filter_form.branch }}                            
                            </div>
                            {% if filter_form.branch.errors %}
                            <small class="row form-text text-danger">{{ filter_form.branch.errors }}</small>
                            {% endif %}
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="offset-sm-1 col-sm-10">
                            <label class="row" style="text-align: center;" for="{{ filter_form.price_from.id_for_label }}">{{ filter_form.price_from.label_tag }}</label>
                            <div class="row">
                                {{ filter_form.price_from }}                            
                            </div>
                            {% if filter_form.price_from.errors %}
                            <small class="row form-text text-danger">{{ filter_form.price_from.errors }}</small>
                            {% endif %}
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="offset-sm-1 col-sm-10">
                            <label class="row" style="text-align: center;" for="{{ filter_form.price_to.id_for_label }}">{{ filter_form.price_to.label_tag }}</label>
                            <div class="row">
                                {{ filter_form.price_to }}                            
                            </div>
                            {% if filter_form.price_to.errors %}
                            <small class="row form-text text-danger">{{ filter_form.price_to.errors }}</small>
                            {% endif %}
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="offset-sm-4 col-sm-4">
                            <div class="row">
                                <button type="submit" style="margin: auto auto;">Filter</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}